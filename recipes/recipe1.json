{
  "variables": ["userid","intent","name","topupamount","mobilenumber","dthnumber","operator","number"],

  "states": [
    {
      "name":"begin"
    },
    {
      "name":"ask_intent",
      "on_enter_say": "What is your intent?",
      "on_enter_call": "testfunc"
    },
    {
      "name":"ask_intent_clarify",
      "on_enter_say":"Either mobile or dth."
    },
    {
      "name":"expect_number",
      "on_enter_say": "Mobile number?"
    },
    {
      "name": "expect_number_clarify",
      "on_enter_say": "Enter a valid mobile number."
    },
    {
      "name": "expect_topup_amount",
      "on_enter_say": "Topup Amount?"
    },
    {
      "name": "expect_topup_amount_clarify",
      "on_enter_say": "Enter an amount between 1 and 999"
    },
    {
      "name": "confirm",
      "on_enter_say": "Confirm that you want a topup for {{topupamount}} on {{mobilenumber}}..."
    },
    {
      "name": "confirm_clarify",
      "on_enter_say": "Type yes or no"
    },
    {
      "name": "involve_human",
      "on_enter_say": "Involving human..."
    },
    {
      "name": "do_topup",
      "on_enter_say": "Topup done."
    }
  ],

  "transitions": [
    ["begin","ask_intent"],
    ["ask_intent", "ask_intent_clarify", ["!ifhasintent"]],
    ["ask_intent_clarify", "involve_human", ["!ifhasintent"]],
    ["ask_intent", "expect_number", ["ifhasintent"]],
    ["expect_number", "expect_number_clarify", ["!ifhasnumber"]],
    ["expect_number_clarify", "involve_human", ["!ifhasnumber"]],
    ["expect_number", "expect_topup_amount", ["ifhasnumber"]],
    ["expect_topup_amount", "expect_topup_amount_clarify", ["!ifhasamount"]],
    ["expect_topup_amount_clarify", "involve_human", ["!ifhasamount"]],
    ["expect_topup_amount", "confirm", ["ifhasamount"]],
    ["expect_topup_amount_clarify", "confirm", ["ifhasnumber"]],
    ["confirm", "do_topup", ["ifconfirm"]],
    ["confirm", "confirm_clarify", ["!ifconfirm"]],
    ["confirm_clarify", "involve_human", ["!ifconfirm"]],
    ["do_topup","ask_intent"],
    ["involve_human", "ask_intent"]
  ]
}
